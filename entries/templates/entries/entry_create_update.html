{% extends 'entries/entries_base.html' %}
{% load entriestags %}

{% block content %}
<div class="container-fluid">
{% if not form.already_submitted %}
    <h1>Entry Form</h1>
{% else %}
    <h1>Updating Entry for category: {{ form.instance.category|format_category }}</h1>
{% endif %}

{% if form.errors %}
    <div class="errorlist">Please correct the errors below</div>
{% endif %}

<form class="dirty-check entry-form" action="" method="post">
{% csrf_token %}
<div class="row">
{% for field in form %}

    <div class="form-group">
        <label class="control-label col-xs-2" for="{{ field.name }}_id">{{ field.label }}{% if field.field.required %}*{% endif %}</label>
        <div class="col-xs-10 {% if form.name.errors %}error-info{% endif %}">
            {% if form.already_submitted %}
                {% if field.name == 'category' %}
                    <span class="submitted-entry-field">{{ form.instance.category | format_category }}</span>
                {% elif field.name == 'video_url' %}
                    <span class="submitted-entry-field">
                        <a href="{{ form.instance.video_url }}">{{ form.instance.video_url }}</a>
                    </span>
                {% endif %}
            {% endif %}
            {{ field }}</div>
        <div class="helptext col-xs-10 col-xs-offset-2">{{ field.help_text }}</div>
        {% if field.errors %}
            <div class="col-xs-10 col-xs-offset-2">
                {{ field.errors }}
            </div>
        {% endif %}
    </div>

{% endfor %}
</div>
    <div class="col-xs-12 vspace vspace-below">
        {% if not form.already_submitted %}
        <br>Click Save to save your data without submitting your entry yet.</br>
        Click Submit to submit your entry.  Please note that
        category and video URL cannot be edited after submission. 
        <strong>Please check you have entered your video URL correctly!</strong>
        </p>
        <input class="btn btn-purple" name='save' type="submit" value="Save for later" />
        {% endif %}
        <input class="btn btn-purple" name='submit' type="submit" value="Submit" />
    </div>

</form>
</div>
{% endblock %}