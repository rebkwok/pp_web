{% extends "ppadmin/base.html" %}
{% load static %}
{% load ppadmintags %}

{% block content %}

    <div class="container-fluid row">

        <h2>Mailing List</h2>
        <p>Go to <a href="{% url 'ppadmin:users' %}">user list</a> to subscribe new users to the mailing list.</p>

        {% if users %}
            <div>
                <a href="#"><div class="btn table-btn btn-purple">Email mailing list</div></a>
            </div>

            <div class="row vspace">
                    <div class="col-sm-12">
                        <div class="panel panel-default">

                            <div class="table-responsive">
                                <table class="table tablesorter" id="sortTable">
                                    <thead>
                                    <tr class="default">
                                        <th class="table-center">Username <span class="fa fa-sort"></span></th>
                                        <th class="table-center">First Name <span class="fa fa-sort"></span></th>
                                        <th class="table-center">Last Name <span class="fa fa-sort"></span></th>
                                        <th class="table-center">Email <span class="fa fa-sort"></span></th>
                                        <th></th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    {% for user in users %}
                                    <tr>
                                        <td class="table-center ppadmin-tbl">{{ user.username|abbr_username }}</td>
                                        <td class="table-center ppadmin-tbl">{{ user.first_name|abbr_name }}</td>
                                        <td class="table-center ppadmin-tbl">{{ user.last_name|abbr_name }}</td>
                                        <td class="table-center ppadmin-tbl">{{ user.email|abbr_email }}</td>
                                        <td class="table-center ppadmin-tbl">
                                            <a class="btn table-btn btn-danger" href="{% url 'ppadmin:unsubscribe' user.id %}">Unsubscribe</a>
                                        </td>
                                    </tr>
                                    {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        {% else %}
            <p>No users currently subscribed to mailing list</p>
        {% endif %}

{% endblock content %}
